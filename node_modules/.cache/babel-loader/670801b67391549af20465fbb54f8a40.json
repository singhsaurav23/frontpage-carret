{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/carret/profile/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/DELL/Desktop/carret/profile/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/carret/profile/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/DELL/Desktop/carret/profile/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment,useState}from\"react\";import Card from\"../UI/Card\";import Modal from\"../UI/Modal\";import styles from\"./ExchangeList.module.css\";import Button from\"../UI/Button\";import del from\"./del.png\";import edit from\"./edit.png\";import Icon from\"../Holdings/Icon\";import Exchange from\"./Exchange\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ExchangeList=function ExchangeList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),exchanges=_useState2[0],setExchanges=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),clicked=_useState4[0],setClicked=_useState4[1];var enterHandler=function enterHandler(){setClicked(true);};var onTapHandler=function onTapHandler(){setClicked(false);};var addHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ename,eApiKey,eApiSecret,subName){var token,tokens,obj,toke,tokenId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setExchanges(function(prev){var updated=_toConsumableArray(prev);updated.unshift({apiKey:eApiKey,apiSecret:eApiSecret,name:ename,sub:subName,id:Math.random().toString()});return updated;});setClicked(false);_context.next=4;return fetch(\"api/auth/token\").then(function(response){return response.json();}).then(function(json){console.log(json);token=json['token'];});case 4:tokens=token;obj={apiKey:eApiKey,apiSecret:eApiSecret,exchangeName:ename};console.log(tokens);toke=\"Bearer \";tokenId=toke.concat(tokens);_context.next=11;return fetch(\"api/profiles\",{method:\"POST\",body:JSON.stringify(obj),headers:{\"Content-Type\":\"application/json\",\"Authorization\":tokenId}});case 11:case\"end\":return _context.stop();}}},_callee);}));return function addHandler(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();var deleteHandler=function deleteHandler(exchangeId){setExchanges(function(prev){var updated=prev.filter(function(exchange){return exchange.id!==exchangeId;});return updated;});};// const editHandler = (exchangeId) => {\n//   deleteHandler(exchangeId);\n//   addHandler()\n// }\nreturn/*#__PURE__*/_jsx(Card,{className:styles.cardBox,children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Exchanges\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{className:styles.firstli,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.firstDiv,children:\"Exchange\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.secDiv,children:[/*#__PURE__*/_jsx(\"div\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Delete\"})]})]}),exchanges.map(function(one){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Exchange,{data:one,onAdd:enterHandler,onDelete:deleteHandler})},one.id);})]}),clicked&&/*#__PURE__*/_jsx(Modal,{onAddExchange:addHandler,onTap:onTapHandler}),/*#__PURE__*/_jsx(Button,{onClick:enterHandler,className:styles.subButton,children:\"Add Exchange\"})]})});};export default ExchangeList;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/carret/profile/frontend/src/portfolio/components/Exchanges/ExchangeList.js"],"names":["Fragment","useState","Card","Modal","styles","Button","del","edit","Icon","Exchange","ExchangeList","props","exchanges","setExchanges","clicked","setClicked","enterHandler","onTapHandler","addHandler","ename","eApiKey","eApiSecret","subName","prev","updated","unshift","apiKey","apiSecret","name","sub","id","Math","random","toString","fetch","then","response","json","console","log","token","tokens","obj","exchangeName","toke","tokenId","concat","method","body","JSON","stringify","headers","deleteHandler","exchangeId","filter","exchange","cardBox","firstli","firstDiv","secDiv","map","one","subButton"],"mappings":"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","sourcesContent":["import { Fragment, useState } from \"react\";\r\nimport Card from \"../UI/Card\";\r\nimport Modal from \"../UI/Modal\";\r\nimport styles from \"./ExchangeList.module.css\";\r\nimport Button from \"../UI/Button\";\r\nimport del from \"./del.png\";\r\nimport edit from \"./edit.png\";\r\nimport Icon from \"../Holdings/Icon\";\r\nimport Exchange from \"./Exchange\";\r\n\r\nconst ExchangeList = (props) => {\r\n  const [exchanges, setExchanges] = useState([]);\r\n  const [clicked, setClicked] = useState(false);\r\n\r\n  const enterHandler = () => {\r\n    setClicked(true);\r\n  };\r\n  const onTapHandler = () => {\r\n    setClicked(false);\r\n  };\r\n  const addHandler = async (ename, eApiKey, eApiSecret, subName) => {\r\n    setExchanges((prev) => {\r\n      const updated = [...prev];\r\n      updated.unshift({\r\n        apiKey: eApiKey,\r\n        apiSecret: eApiSecret,\r\n        name: ename,\r\n        sub: subName,\r\n        id: Math.random().toString(),\r\n      });\r\n      return updated;\r\n    });\r\n    setClicked(false);\r\n    var token;\r\n    await fetch(\"api/auth/token\")\r\n    .then(response => response.json())\r\n    .then((json) => {\r\n      console.log(json)\r\n      token=json['token']\r\n    });\r\n    const tokens=token;\r\n    const obj = {\r\n      apiKey: eApiKey,\r\n      apiSecret: eApiSecret,\r\n      exchangeName: ename\r\n    };\r\n    console.log(tokens);\r\n    const toke=\"Bearer \";\r\n    const tokenId = toke.concat(tokens)\r\n    await fetch(\"api/profiles\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(obj),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": tokenId\r\n      },\r\n    });\r\n  };\r\n\r\n  const deleteHandler = (exchangeId) => {\r\n    setExchanges((prev) => {\r\n      const updated = prev.filter((exchange) => exchange.id !== exchangeId);\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  // const editHandler = (exchangeId) => {\r\n  //   deleteHandler(exchangeId);\r\n  //   addHandler()\r\n  // }\r\n  return (\r\n    <Card className={styles.cardBox}>\r\n      <Fragment>\r\n        <h2>Exchanges</h2>\r\n        <ul>\r\n          <li className={styles.firstli}>\r\n            <div className={styles.firstDiv}>Exchange</div>\r\n            <div className={styles.secDiv}>\r\n              <div>Edit</div>\r\n              <div>Delete</div>\r\n            </div>\r\n          </li>\r\n          {exchanges.map((one) => (\r\n            <li key={one.id}>\r\n              <Exchange\r\n                data={one}\r\n                onAdd={enterHandler}\r\n                onDelete={deleteHandler}\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        {clicked && <Modal onAddExchange={addHandler} onTap={onTapHandler} />}\r\n        <Button onClick={enterHandler} className={styles.subButton}>\r\n          Add Exchange\r\n        </Button>\r\n      </Fragment>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ExchangeList;\r\n"]},"metadata":{},"sourceType":"module"}